<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Мужское кино — автопоток</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 20px;
    }
    #plok {
      width: 100%;
      max-width: 800px;
      height: 450px;
      margin: 0 auto;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://ip.ontivi.net/p13.js"></script> <!-- подключаем их же Playerjs -->
</head>
<body>
  <h2>Мужское кино (Автообновляемый поток)</h2>
  <div id="plok"></div>
  <div id="status">Загрузка...</div>

  <script>
    // Используем CORS-прокси (если заблочен — замени на свой сервер)
    const proxyUrl = "https://corsproxy.io/?";
    const targetUrl = "https://ip.ontivi.net/muzhskoe-kinotv.html";

    fetch(proxyUrl + encodeURIComponent(targetUrl))
      .then(res => res.text())
      .then(html => {
        // Парсим file: "#FI..."
        const match = html.match(/file\s*:\s*"(#FI[^"]+)"/);
        if (!match) {
          document.getElementById("status").textContent = "❌ Поток не найден";
          return;
        }

        const file = match[1];
        console.log("Найден file:", file);

        new Playerjs({
          id: "plok",
          file: file
        });

        document.getElementById("status").textContent = "▶ Поток запущен";
      })
      .catch(err => {
        console.error(err);
        document.getElementById("status").textContent = "⚠ Ошибка загрузки: " + err;
      });
  </script>
</body>
</html>