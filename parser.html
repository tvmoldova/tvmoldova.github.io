<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú—É–∂—Å–∫–æ–µ –∫–∏–Ω–æ ‚Äî –∞–≤—Ç–æ–ø–æ—Ç–æ–∫</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      padding: 20px;
    }
    #plok {
      width: 100%;
      max-width: 800px;
      height: 450px;
      margin: 0 auto;
    }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://ip.ontivi.net/p13.js"></script> <!-- Playerjs -->
</head>
<body>
  <h2>–ú—É–∂—Å–∫–æ–µ –∫–∏–Ω–æ (–ê–≤—Ç–æ–ø–æ—Ç–æ–∫)</h2>
  <div id="plok"></div>
  <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ç–æ–∫–∞...</div>

  <script>
    const proxyUrl = "https://api.allorigins.win/get?url=";
    const targetUrl = "https://ip.ontivi.net/muzhskoe-kinotv.html";

    fetch(proxyUrl + encodeURIComponent(targetUrl))
      .then(res => res.json())
      .then(data => {
        const html = data.contents;

        // –ü–∞—Ä—Å–∏–º –∏–∑ new Playerjs({...})
        const match = html.match(/file\s*:\s*"(#FI[^"]+)"/);
        if (!match || !match[1]) {
          document.getElementById("status").textContent = "‚ùå –ü–æ—Ç–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω";
          return;
        }

        const file = match[1];
        console.log("üéØ –ù–∞–π–¥–µ–Ω file:", file);

        new Playerjs({
          id: "plok",
          file: file
        });

        document.getElementById("status").textContent = "‚úÖ –ü–æ—Ç–æ–∫ –∑–∞–ø—É—â–µ–Ω";
      })
      .catch(err => {
        console.error("–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:", err);
        document.getElementById("status").textContent = "‚ö† –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ—Ç–æ–∫–∞";
      });
  </script>
</body>
</html>